RHDM DMN PMML ORDER
========================================

Red Hat Decision Manager (RHDM) is the productized version of the Drools project.
This project is an example of how to execute a DMN decision that include and ML logic via PMML.

Highlights
----------------------------------------

Model generated by [SkLearn2PMML](https://github.com/jpmml/sklearn2pmml)

How to generate the PMML
----------------------------------------

- Execute the python program to perform the learning phase, the trained model is serialized in the PMML

  ```sh
  python python/ml-training.py
  ```

- Move the PMML file in the RHDM project
  
  ```sh
  mv order-approval.pmml src/main/resources/com/demo/
  ```

- Fix the PMML namespace to match the supported version 4.3:

  ```xml
  <PMML version="4.3" xmlns="http://www.dmg.org/PMML-4_3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  ```

- In order to have a nice label for the model selection in the DMN file add the optional `modelName` attribute:

  ```xml
  <RegressionModel modelName="approvalRegression" functionName="classification" normalizationMethod="logit">
  ```

Prepare RHDM PMML runtime
----------------------------------------

- Create a local copy of the dependencies:

  ```sh
  mvn dependency:copy-dependencies
  ```
- Copy the libraries in the RHDM runtime:

  ```sh
  cp target/dependency/kie-dmn-jpmml-7.39.0.Final-redhat-00007.jar <RHDM-Install-dir>/standalone/deployments/business-central.war/WEB-INF/lib
  cp target/dependency/pmml-* <RHDM-Install-dir>/standalone/deployments/business-central.war/WEB-INF/lib/
  ```

